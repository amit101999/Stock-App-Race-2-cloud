import { ImageInfo, ImageInspectInfo } from 'dockerode';
import * as tar from 'tar';
import { Readable } from 'stream';
export type TImageManifest = {
    Config: string;
    RepoTags: Array<string>;
    Layers: Array<string>;
};
export type TOCIImageManifests = {
    mediaType: string;
    digest: string;
    size: string;
    /**
     * example
     * ```json
     *  {
     *  "io.containerd.image.name": "localhost/catalyst/app-tar:temp",
     *  "org.opencontainers.image.ref.name": "temp"
     *  }
     * ```
     */
    annotations: Record<string, string>;
};
export type TImageIndex = {
    schemaVersion: number;
    mediaType: string;
    manifests: Array<TOCIImageManifests>;
};
/**
 * Get all images present in local
 * @param reference image name to search for (optional)
 * @returns
 */
export declare function getAllLocalImages(reference?: string): Promise<Array<ImageInfo>>;
/**
 * Search and find if tht image is available in the local container registry
 * @param image image to be searched
 * @returns Promise that resolves to Image info if the image is found
 */
export declare function findImageInLocal(image: string): Promise<ImageInfo | undefined>;
export declare function loadImageFromStream(stream: Readable): Promise<void>;
/**
 * Checks if the image is present in local repository, if not it'll try to download it from Stratus and load it to localhost.
 * @param image Image name
 * @returns Image details in local
 */
export declare function loadImage(image: string, downloadUrl: string, update?: boolean): Promise<ImageInfo>;
export declare function loadTempImageTar(name: string, stream: NodeJS.ReadableStream): Promise<ImageInfo>;
export declare function inspectImage(image: string): Promise<ImageInspectInfo>;
/**
 * Remove image from the local container registry
 * @param prefix Image to be removed
 * @returns Promise that resolves to an Array of removed images
 */
export declare function removeImages(prefix: string): Promise<Array<ImageInfo>>;
/**
 * Package a image as a tar
 * @param prefix to identify the image
 * @returns Promise that resolves to a stream of a tar file
 */
export declare function packImage(prefix: string): Promise<NodeJS.ReadableStream>;
/**
 * Get the contents of an entry in a tar file
 * @param tarPath Path to the .tar file
 * @param entry Entry to be extracted
 * @returns Entry as a stream
 */
export declare function getTarEntry(tarPath: string, entry: string): Promise<NodeJS.ReadableStream>;
/**
 * Get the contents of an entry in a tar file
 * @param tarPath Path to the .tar file
 * @param entry function to be called for each entry
 * @returns Entry as a stream
 */
export declare function getTarEntry(tarPath: string, entry: (x: tar.ReadEntry) => unknown): Promise<void>;
