import { ImageInspectInfo } from 'dockerode';
import EventEmitter from 'events';
import { FSWatcher } from 'fs';
export interface IFnTarget {
    name: string;
    id?: string;
    source: string;
    build: string;
    valid: boolean;
    failure_reason?: string | Error;
    stack: string;
    type: string;
    index?: string;
    url?: string;
    url_with_id?: string;
    local_url?: string;
    watcher?: FSWatcher;
    integ_config?: Array<{
        service: string;
        handlers?: Record<string, string>;
    }>;
    env_var?: Record<string, unknown>;
    plugins?: Record<string, unknown>;
    inputs?: string | Record<string, unknown>;
    memory?: number;
    additionalInfo?: Record<string, unknown>;
}
export interface IAppSailConfig {
    source: string;
    name: string;
    runtime?: 'catalyst' | 'custom';
}
export interface IAppSailServerConfig extends Record<string, unknown> {
    command?: string;
    build_path?: string;
    buildPath?: string;
    ignore?: Array<string>;
    scripts?: Record<'predeploy' | 'postdeploy' | 'preserve' | 'postserve', string>;
    stack?: string;
    env_variables?: Record<string, string>;
    platform?: 'javase' | 'war';
    memory?: number;
    catalyst_auth?: boolean;
    login_redirect?: string;
    port?: {
        http: number;
        debug: number;
    };
    raw: {
        source_path?: string;
        build_path?: string;
    };
}
export type TAppSailDetails = {
    validity: {
        valid: boolean;
        reason?: string;
    };
    url?: string;
    config?: IAppSailServerConfig;
} & IAppSailConfig;
export type TAppSailServerDetails = TAppSailDetails & {
    port: {
        /** port to start the appsail server
         * * No container: will determine the port to which the master server proxies the request to
         * * Containerization: Will determine the container port which will be bound to the host port. No options to customize the host port
         * * Custom runtime: same as Containerization
         * TODO: // need to work on customizing the port mapping for container run
         */
        appsail: {
            host: number;
            container?: number;
        };
        /** port to start the appsail master server - cannot be customized */ proxy: number;
        /** applicable only for custom and containerization - specifies the port to be exposed form the container for debugging */
        debug: {
            host: number;
            container?: number;
        };
    };
};
export interface IServerDetails<T = IFnTarget | TAppSailServerDetails> {
    type: 'server' | 'functions' | 'appsail';
    target?: T;
    httpPort: T extends IFnTarget ? number : never;
    debugPort: T extends IFnTarget ? number : never;
    process?: EventEmitter;
}
export interface IImageInspectInfo extends ImageInspectInfo {
}
